<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Snowbound Vow</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Space+Grotesk:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
  <body>
  <div class="start-menu" id="startMenu">
    <div class="start-card">
      <div class="start-logo">
        <div class="logo-ring"></div>
        <div class="logo-text">
          <span>Snowbound</span>
          <strong>Vow</strong>
        </div>
      </div>
      <p class="eyebrow">Aes Sedai & Warder</p>
      <h2>Deedra & Ray</h2>
      <p class="lede">Channel a path through frozen runes so Deedra and Ray can meet beneath the snow. Rotate the tiles to connect them.</p>
      <div class="start-actions">
        <button id="startGame" class="btn primary">Start Puzzle</button>
      </div>
    </div>
  </div>

  <div class="page">
    <button id="themeToggle" class="btn theme-toggle">Switch to Light</button>
    <header class="hero">
      <div class="title-block">
        <p class="eyebrow">For Deedra • Holiday Gift</p>
        <h1>Snowbound Vow</h1>
        <p class="lede">Rotate the cel-shaded channel tiles so Deedra (Aes Sedai) and Ray (Warder) can join forces through the snow.</p>
        <p class="romance">Each connection is a promise; complete the path to share their vow.</p>
        <div class="hero-actions">
          <button id="startRun" class="btn primary">Start Puzzle</button>
        </div>
        <p class="hint">Flow: Begin → Click tiles to rotate → Connect Deedra to Ray → Unlock the ending.</p>
      </div>
      <div class="stats-card">
        <div class="stat">
          <span class="label">Score</span>
          <span id="scoreDisplay" class="value">0</span>
        </div>
        <div class="stat">
          <span class="label">Moves</span>
          <span id="livesDisplay" class="value">0</span>
        </div>
        <div class="stat">
          <span class="label">Links</span>
          <span id="waveDisplay" class="value">0</span>
        </div>
        <div class="stat">
          <span class="label">Time</span>
          <span id="channelDisplay" class="value">0s</span>
        </div>
        <button id="toggleAudio" class="btn tiny">SFX: On</button>
      </div>
    </header>

    <main class="layout">
      <section class="panel instructions">
        <h2>How to Play</h2>
        <ul>
          <li>Click any tile to rotate it. Create an unbroken path of channels from Deedra on the left to Ray on the right.</li>
          <li>Every rotation counts as a move. Fewer moves = higher score.</li>
          <li>Some tiles are straight, some curved, some T-shaped. All are cel shaded in red/green/gold/white.</li>
          <li>Complete the connection to unlock their romantic ending beneath the snow.</li>
          <li>Use the light/dark toggle for vibe; SFX toggle for chimes.</li>
        </ul>
        <div class="lore">
          <p><strong>Wheel of Time vibe:</strong> Channeling threads as puzzle paths; Trolloc horned sigils guard the wrong turns.</p>
          <p><strong>Holiday vibe:</strong> Red/green/gold/white cel-shaded palette, snowfall, and heart sparks.</p>
        </div>
      </section>

      <section class="panel playfield">
        <canvas id="playfield" width="900" height="520"></canvas>
        <div class="overlay" id="overlay">
          <div id="message"></div>
        </div>
        <div class="cutscene" id="cutscene">
          <div class="cutscene-card">
          <p class="cutscene-eyebrow">Ray's Gift</p>
          <h3>After the Last Trolloc</h3>
            <p class="cutscene-body">Snow settles over the White Tower grounds. Deedra’s calm light wraps Ray, and his guard becomes an embrace.</p>
            <p class="cutscene-body">“In every turning,” Ray whispers, “I am your shield and your joy.” Deedra answers, “And you are the warmth in my winter.”</p>
            <p class="cutscene-body">Fight again if you want the magic to keep weaving.</p>
            <div class="cutscene-actions">
              <button id="restartButton" class="btn primary">Play Again</button>
            </div>
          </div>
        </div>
      </section>

      <section class="panel side">
        <h2>Controls</h2>
        <p class="wheel-result">Click tiles to rotate them. Solve as efficiently as you can.</p>
        <h2>Tips</h2>
        <p class="wheel-result">Look for corners and straights to bridge Deedra’s side to Ray’s. Avoid dead-ends. Fewer rotations mean a better score.</p>
      </section>
    </main>
  </div>

  <script src="main.js"></script>
</body>
</html>
